<div class="collaborators-container">
  <h1 class="collaborators-title">Collaborators</h1>

  <!-- Search Collaborator -->
  <div class="add-collaborator-section" data-controller="collaborator-search" data-collaborator-search-url-value="<%= search_collaborators_path %>">
    <div class="collaborator-search-wrapper">
      <input type="text"
             placeholder="Search by username..."
             class="collaborator-input"
             autocomplete="off"
             data-collaborator-search-target="input"
             data-action="input->collaborator-search#search focus->collaborator-search#showResults blur->collaborator-search#hideResults">
      <div class="search-results" data-collaborator-search-target="results"></div>
    </div>
  </div>

  <!-- Collaborators List -->
  <div class="collaborators-list">
    <% if @collaborators.any? %>
      <% @collaborators.each do |collaborator| %>
        <div class="collaborator-item">
          <div class="collaborator-avatar">
            <% if collaborator.avatar.attached? %>
              <%= image_tag collaborator.avatar, class: "avatar-image" %>
            <% else %>
              <span class="avatar-placeholder"><%= collaborator.username[0].upcase %></span>
            <% end %>
          </div>
          <div class="collaborator-info">
            <span class="collaborator-username"><%= collaborator.username %></span>
          </div>
          <%= button_to collaborator_path(collaborator),
              method: :delete,
              class: "remove-collaborator-btn",
              data: { turbo_confirm: "Remove #{collaborator.username} from collaborators?" } do %>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          <% end %>
        </div>
      <% end %>
    <% else %>
      <div class="empty-collaborators">
        <p>No collaborators yet</p>
        <p class="empty-hint">Search for users by their username above</p>
      </div>
    <% end %>
  </div>
</div>
